/*********************************************(GROL) Gladiators: Rise of Legends - ArmoryWeapons.asClass for the Armory Screen: Weapons*********************************************/package com.controllers {		import flash.display.MovieClip;	import com.models.Model;	import com.utils.CustomEvent;	import com.utils.Items;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.events.EventDispatcher;	import flash.net.URLLoader;	import flash.net.URLRequest;		public class ArmoryWeapons extends MovieClip {				private var m:Model = Model.instance;		private var wb:weaponBlock = new weaponBlock();		private var item:Items = new Items();				public function ArmoryWeapons() {			addEventListener(Event.ADDED_TO_STAGE, onLoad);		}				public function onLoad(e:Event):void{			trace("Class ArmoryWeapons Loaded");			addEventListener(MouseEvent.CLICK, parseTouch);			m.addEventListener(CustomEvent.LOAD_ARMORY, loadArmory); 		}				public function parseTouch(e:MouseEvent):void{			switch(e.target.name){				case "weapon_bttn_mc" :					break;				case "armor_bttn_mc" :					m.gotoScreen = "armoryScreenArmor";					break;				default : break;			}		}				public function loadArmory(event:CustomEvent):void{			trace("Armory XML:"+event.dataObj);			var xmlListWeapons:XMLList = event.dataObj.armory.weapons.item;			m.getStatusUpdate(event.dataObj);						try{while(weapon_frame.numChildren){weapon_frame.removeChildAt(0);} }			catch(error:Error){trace("ERROR: Frame Reset");}						var tempReq:String = "";			var i:uint=0;			for(i=0;i<xmlListWeapons.length();i++){				if(Number(m.currentLevel) < Number(xmlListWeapons[i].level)){					//code here to make the final break element faded to the user.					break;				}								wb = new weaponBlock();				wb.title_txt.text = xmlListWeapons[i].title;				wb.cost_txt.text = xmlListWeapons[i].cost;				wb.owned_txt.text = "Own "+xmlListWeapons[i].owned;				wb.dmg_txt.text = xmlListWeapons[i].dmg;				wb.pre_txt.text = xmlListWeapons[i].pre;				wb.def_txt.text = xmlListWeapons[i].def;				tempReq = "";				if(xmlListWeapons[i].req_strength != "0" && xmlListWeapons[i].req_strength != ""){					tempReq += " "+xmlListWeapons[i].req_strength+" Strength";				}				if(xmlListWeapons[i].req_quickness != "0" && xmlListWeapons[i].req_quickness != ""){					tempReq += " "+xmlListWeapons[i].req_quickness+" Quickness";				}				if(xmlListWeapons[i].req_fortitude != "0" && xmlListWeapons[i].req_fortitude != ""){					tempReq += " "+xmlListWeapons[i].req_fortitude+" Fortitude";				}				wb.req_txt.text = tempReq;				wb.img_holder.addChild(item.parseItems(xmlListWeapons[i].img));								wb.uid = xmlListWeapons[i].uid;				wb.sell = xmlListWeapons[i].sell;				wb.addEventListener(MouseEvent.CLICK, parseWeaponClick);				function parseWeaponClick(e:MouseEvent):void{					trace("Pick Weapon "+e.currentTarget.uid);				}				weapon_frame.addChild(wb);				wb.y += i*150;			}		}			}	}