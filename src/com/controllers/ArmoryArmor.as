/*********************************************(GROL) Gladiators: Rise of Legends - Training.asClass for the Armory Screen: Weapons and armor*********************************************/package com.controllers {		import flash.display.MovieClip;	import com.models.Model;	import com.utils.CustomEvent;	import com.utils.Items;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.events.EventDispatcher;	import flash.net.URLLoader;	import flash.net.URLRequest;		public class ArmoryArmor extends MovieClip {				private var m:Model = Model.instance;		private var ab:armorBlock = new armorBlock();		private var item:Items = new Items();				public function ArmoryArmor() {			addEventListener(Event.ADDED_TO_STAGE, onLoad);		}				public function onLoad(e:Event):void{			trace("Class ArmoryArmor Loaded");			addEventListener(MouseEvent.CLICK, parseTouch);			m.addEventListener(CustomEvent.LOAD_ARMORY, loadArmory);  		}				public function parseTouch(e:MouseEvent):void{			switch(e.target.name){				case "weapon_bttn_mc" :					m.gotoScreen = "armoryScreenWeapons";					break;				case "armor_bttn_mc" :					break;				default : break;			}		}				public function loadArmory(event:CustomEvent):void{			trace("Armory XML:"+event.dataObj);			var xmlListArmor:XMLList = event.dataObj.armory.armor.item;			m.getStatusUpdate(event.dataObj);						try{while(armor_frame.numChildren){armor_frame.removeChildAt(0);} }			catch(error:Error){trace("ERROR: Frame Reset");}						var tempReq:String = "";			var i:uint=0;						for(i=0;i<xmlListArmor.length();i++){				if(Number(m.currentLevel) < Number(xmlListArmor[i].level)){				trace("wtf");					//break;				}				ab = new armorBlock();				ab.title_txt.text = xmlListArmor[i].title;				ab.cost_txt.text = xmlListArmor[i].cost;				ab.owned_txt.text = "Own "+xmlListArmor[i].owned;				ab.def_txt.text = xmlListArmor[i].def;				ab.pro_txt.text = xmlListArmor[i].pro;				ab.mod_txt.text = xmlListArmor[i].mod;				tempReq = "";				if(xmlListArmor[i].req_strength != "0" && xmlListArmor[i].req_strength != ""){					tempReq += " "+xmlListArmor[i].req_strength+" Strength";				}				if(xmlListArmor[i].req_quickness != "0" && xmlListArmor[i].req_quickness != ""){					tempReq += " "+xmlListArmor[i].req_quickness+" Quickness";				}				if(xmlListArmor[i].req_fortitude != "0" && xmlListArmor[i].req_fortitude != ""){					tempReq += " "+xmlListArmor[i].req_fortitude+" Fortitude";				}				ab.req_txt.text = tempReq;				ab.img_holder.addChild(item.parseItems(xmlListArmor[i].img));								ab.uid = xmlListArmor[i].uid;				ab.sell = xmlListArmor[i].sell;				ab.addEventListener(MouseEvent.CLICK, parseArmorClick);				function parseArmorClick(e:MouseEvent):void{					trace("Pick Armor "+e.currentTarget.uid);				}				armor_frame.addChild(ab);				ab.y += i*150;			}		}			}	}